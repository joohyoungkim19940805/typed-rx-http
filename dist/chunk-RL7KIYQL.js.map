{"version":3,"sources":["../src/http-core/types.ts","../src/http-core/utils.ts"],"names":[],"mappings":"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","file":"chunk-RL7KIYQL.js","sourcesContent":["// http-core/@types/types.ts\r\nexport type OpenApiPathsLike = object;\r\n\r\nexport interface ServiceArguments<\r\n\tPaths extends OpenApiPathsLike,\r\n\tTPath extends keyof Paths,\r\n\tTMethod extends keyof Paths[TPath] & string,\r\n\tR,\r\n> {\r\n\turl: TPath;\r\n\tmethod: TMethod;\r\n\r\n\tpathVariable?: Paths[TPath][TMethod] extends {\r\n\t\tparameters: { path: infer P };\r\n\t}\r\n\t\t? P | undefined\r\n\t\t: Record<string, unknown> | undefined;\r\n\r\n\tqueryString?: Paths[TPath][TMethod] extends {\r\n\t\tparameters: { query: infer Q };\r\n\t}\r\n\t\t? Q | undefined\r\n\t\t: Record<string, unknown> | undefined;\r\n\r\n\tbody?: Paths[TPath][TMethod] extends {\r\n\t\trequestBody: { content: { \"application/json\": infer B } };\r\n\t}\r\n\t\t? B | undefined\r\n\t\t: unknown;\r\n\r\n\t/** response.ok 여부와 상관없이 Response를 직접 파싱하고 싶을 때 */\r\n\tresultInterceptor?: (response: Response) => Promise<R>;\r\n\r\n\t/** per-request headers */\r\n\theaders?: Readonly<Record<string, string>>;\r\n}\r\n\r\nexport interface CacheForService<CacheName extends string = string> {\r\n\tcacheTime: number;\r\n\tcacheSize?: number;\r\n\tcacheName: CacheName;\r\n}\r\n\r\n/** 코어가 던지는 표준 에러 (401 포함) */\r\nexport class HttpResponseError<Args = unknown> extends Error {\r\n\tpublic readonly name = \"HttpResponseError\";\r\n\tconstructor(\r\n\t\tpublic readonly response: Response,\r\n\t\tpublic readonly args: Args,\r\n\t\tpublic readonly data?: unknown,\r\n\t\tmessage?: string,\r\n\t) {\r\n\t\tsuper(message ?? `HTTP ${response.status}`);\r\n\t}\r\n\r\n\tget status() {\r\n\t\treturn this.response.status;\r\n\t}\r\n}\r\n\r\nexport const isHttpResponseError = (e: unknown): e is HttpResponseError<any> =>\r\n\te instanceof HttpResponseError;\r\n","// http-core/utils.ts\r\nexport const replacePathVariable = (\r\n\ttemplate: string,\r\n\trecord: Record<string, string | number | boolean | null | undefined>,\r\n): string => {\r\n\treturn template.replace(/\\{(.*?)\\}/g, (_, key) => {\r\n\t\tconst value = record[key];\r\n\t\treturn value != null ? String(encodeURIComponent(value)) : `{${key}}`;\r\n\t});\r\n};\r\n\r\nexport const toQueryString = (\r\n\trecord: Record<\r\n\t\tstring,\r\n\t\t| string\r\n\t\t| string[]\r\n\t\t| number\r\n\t\t| number[]\r\n\t\t| boolean\r\n\t\t| boolean[]\r\n\t\t| null\r\n\t\t| undefined\r\n\t>,\r\n): string => {\r\n\tconst qs = Object.entries(record).reduce((query, [key, value]) => {\r\n\t\tif (value == null) return query;\r\n\t\tlet pair = \"\";\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tpair = value\r\n\t\t\t\t.map(\r\n\t\t\t\t\t(item) =>\r\n\t\t\t\t\t\t`${encodeURIComponent(key)}=${encodeURIComponent(String(item))}`,\r\n\t\t\t\t)\r\n\t\t\t\t.join(\"&\");\r\n\t\t} else {\r\n\t\t\tpair = `${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`;\r\n\t\t}\r\n\t\treturn query ? `${query}&${pair}` : pair;\r\n\t}, \"\");\r\n\r\n\treturn `?${qs}`;\r\n};\r\n\r\nexport const stableStringify = (obj: any) => {\r\n\tif (!obj) return \"{}\";\r\n\tif (typeof obj !== \"object\") return JSON.stringify(obj);\r\n\tconst allKeys = new Set<string>();\r\n\tJSON.stringify(obj, (k, v) => (allKeys.add(k), v));\r\n\tconst keys = Array.from(allKeys).sort();\r\n\treturn JSON.stringify(obj, keys);\r\n};\r\n\r\nexport const joinUrl = (baseUrl: string, path: string) => {\r\n\tconst b = baseUrl.replace(/\\/+$/, \"\");\r\n\tconst p = path.replace(/^\\/+/, \"\");\r\n\treturn `${b}/${p}`;\r\n};\r\n"]}